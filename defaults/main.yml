---
## General

nginx_version: 1.12.2

## Service options

# Owner
nginx_user: nginx
nginx_group: nginx
nginx_groups: []

# start on boot
nginx_service_enabled: True
# current state: started, stopped
nginx_service_state: started

# Connection properties
nginx_workers: auto
# if you don't set FD's then OS settings will be used which is by default 2000
# nginx_worker_rlimit_nofile: 2000
nginx_connections: 2500
nginx_keepalive_timeout: 65
nginx_keepalive_requests: 100000
nginx_client_max_body_size: 50M

# Files & Paths
nginx_download_dir: "/tmp"
nginx_src_dir: "/usr/src"
nginx_log_path: "/var/log/nginx"
nginx_access_log: "{{ nginx_log_path }}/access.log"
nginx_error_log: "{{ nginx_log_path }}/error.log"
nginx_conf_path: "/etc/nginx"
nginx_conf: "{{ nginx_conf_path }}/nginx.conf"
nginx_extra_servers_path: "{{ playbook_dir }}/files/nginx/servers"
nginx_extra_servers_template_path: "{{ playbook_dir }}/templates/nginx/servers"
nginx_install_bin_path: "/usr"
nginx_extra_path: "extra-conf"
nginx_extra_conf_path: "{{ nginx_conf_path }}/{{ nginx_extra_path }}"
nginx_logrotate_template_path: "{{ playbook_dir }}/templates/logrotate.j2"


# Heathers_more
headers_more_version: 0.31

# Lua
lua_module_version: 0.10.11
lua_version: 5.1.5

## Metrics
nginx_lua_prometheus_version: 0.1-20170610
nginx_prometheus_metrics_enabled: true
nginx_prometheus_metrics_port: 9145
nginx_prometheus_metrics_role: nginx
nginx_prometheus_metrics_path: metrics
metrics_templates_path: "{{ playbook_dir }}/templates/metrics"

## Miscellaneous
# Set true to force the download and installation of the package
nginx_force_reinstall: false

## Nginx compile time options
## https://www.nginx.com/resources/wiki/start/topics/tutorials/installoptions/
nginx_compile_time_options_builtin_modules:
  - http_stub_status_module
  - http_realip_module

nginx_compile_time_options_external_modules_paths:
  - "{{ nginx_src_dir }}/headers-more-nginx-module-{{ headers_more_version }}"
  - "{{ nginx_src_dir }}/lua-nginx-module-{{ lua_module_version }}"

nginx_limit_no_file: 1024